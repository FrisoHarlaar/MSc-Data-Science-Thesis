{% extends "base.html" %}
{% load static %}

{% block title %}Processing Image - Novelscape Inspiration{% endblock %}

{% block body_class %}loading-page{% endblock %}

{% block content %}
<div class="processing-container">
    <h1>Processing Your Image</h1>
    
    {% if error %}
        <div class="error-message">
            <p>Error processing image: {{ error }}</p>
            <a href="{% url 'image_search' %}" class="login-btn">Try Again</a>
        </div>
    {% else %}
        <!-- Simple meta refresh - reloads page every 2 seconds -->
        <meta http-equiv="refresh" content="1">
        
        <div class="processing-status">
            <div class="spinner"></div>
            <p>Analyzing visual elements and emotions in your image...</p>
            <p class="small">This may take a few moments. Please don't refresh the page.</p>
        </div>
        
        {% if user_image %}
            <div class="uploaded-image">
                <img src="{{ user_image.image.url }}" alt="Your uploaded image" class="preview-img">
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}